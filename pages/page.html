<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../images/iconeFace.png" type="image/x-icon">
    <link rel="stylesheet" href="../style/logado.css">
    <link rel="stylesheet" href="../style/reset.css">
    <title>Logado</title>
</head>
<body>
    <div class="barra">
        <h1 class="texto-barra">VOCÊ ESTA LOGADO</h1> 
        <p id="usuario-que-logou" class="usuario-que-logou"> </p>
        <button class="sair"><a href="../pages/main.html">Sair</a></button>  
    </div>
    <div>
        <h4 id="UsuarioLogou"></h4>
    </div>
    <div class="pessoas">
        <div id="sugestaoAmigos">
            <h2 class="nameSujestao">Sugestão de amigos</h2>
            <div id="usuariosAdicionar">
            </div>
        </div>

        <div id="Amigos" class="Amigos">
            <h2 class="text-seusAmigos">Seus Amigos</h2>
            <div class="todosAmigos">
            <div id="seuAmigo">

            </div>
            </div>
        </div>    
    </div>

    <!--<div class="publicar">
        <label>Título:</label>
        <input type="text" id="txtTitulo"/>
        <label>Subtítulo:</label>
        <input type="text" id="txtSubtitulo"/>
        <button id="btnEnviar" onclick="Publicar()">Publicar</button>
    </div>-->
    
<!--Isso só vai aparecer se o botão for clicado-->
    <div id="geral">
        <div class="postagem">
            <h4>Oque você está pensando?</h2>
            <textarea style="resize: none" name="pub-escrita" class="pub-escrita" id="pub-escrita" cols="30" rows="10"></textarea>
        </div>
        <button class="publicar" onclick="publicar()">Publicar</button>
    </div>
    <div id="pub" class="pub">
        
    </div>

    <!--<div id="divResultado">-->
    </div>

    <script src="../js/Back.js.js"></script>
    <script>
       var usuarios = JSON.parse( localStorage.getItem("usuarios"))
       var Amigos = JSON.parse(localStorage.getItem("novoUsuario"))
       
       let todosAmigos = []
       let todosAmigosId = []

       function publicar() { 
        var para = document.createElement("p");
        para.classList.add("postagem-paragrafo")
        var pub = document.getElementById("pub")
        var p = document.getElementById("pub-escrita").value
        para.innerHTML = p
        pub.appendChild(para)
        console.log("Publicou")

        if(p === ""){
            alert("Sua publicação está vazia")
            return
        }
        }

       

        function carregaSugestoesAmigos(){
            let container = document.getElementById("usuariosAdicionar")
            let usuariosAmigos = usuariosAtuais();

            for(let i=0; i<usuariosAmigos.length; i++){
                //cria paragrafo que aparece nome do usuario
                
                let nomeUsuario = document.createElement("p")
                nomeUsuario.innerHTML = usuariosAmigos[i].nomeUsuario;
                nomeUsuario.className = "users"
                let botaoAdicionar = document.createElement("button");
                botaoAdicionar.innerHTML = "Adicionar"
                console.log(usuariosAmigos[i])
                botaoAdicionar.setAttribute("onclick",`adicionarAmigo(${usuariosAmigos[i].id} ,"${usuariosAmigos[i].nomeUsuario}")`)
                botaoAdicionar.className = "botaoAdicionar"

                container.appendChild(nomeUsuario);
                container.appendChild(botaoAdicionar);
            }
        }
            function adicionarAmigo(ADuser , ADnome){
                alert(`Adicionando o amigo ${ADnome}`)
                todosAmigos.push(ADnome)
                todosAmigosId.push(ADuser)
                var seuAmigo = document.getElementById("seuAmigo")
                
                for(let i=0; i<todosAmigos.length; i++){
                    var todosSeusAmigos = document.getElementById("seuAmigo")
                    var nomeUsuario = document.createElement("p")
                    nomeUsuario.classList.add("seusAmigos")
                    nomeUsuario.innerHTML = todosAmigos[i]
                    let botaoConversa = document.createElement("button")
                    botaoConversa.innerHTML = "Conversar"
                    botaoConversa.classList.add("conversar")
                    todosSeusAmigos.appendChild(nomeUsuario)
                    todosSeusAmigos.appendChild(botaoConversa)
                    console.log(todosAmigos[i])
                    
                }
                
               console.log(todosAmigos)
            
             }
             
             
        function carregarAmigos(){
            let todos = document.getElementById("seuAmigo")
            let nomeAmigo = document.createElement("p")
            nomeAmigo.innerHTML = usuariosAtuais[i].nomeAmigo
            todos.appendChild(nomeAmigo);
        }   
       

        function Adicionar(){
            usuarios[0].amigos = [1]
        }
        
        carregaSugestoesAmigos();    
        

        //function Publicar(){
            //var titulo = document.getElementById("txtTitulo").value;
            //var subtitulo = document.getElementById("txtSubtitulo").value;
           // var div = document.getElementById("divResultado");
         //   div.innerHTML = "<h1>" + titulo +"</h1>"+ "\n" + subtitulo;
       // }
        
       

    </script>
</body>
</html>